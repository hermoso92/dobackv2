[pytest]
minversion = 7.0
addopts = -ra -v --cov=app --cov-report=term-missing
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Configuración de cobertura
addopts = -v --cov=app --cov-report=term-missing --cov-report=html

# Variables de entorno para tests
env =
    FLASK_ENV=testing
    TESTING=True
    SECRET_KEY=test-secret-key
    SQLALCHEMY_DATABASE_URI=sqlite:///:memory:
    UPLOAD_FOLDER=tests/uploads
    JWT_SECRET_KEY=test-jwt-secret-key
    CACHE_TYPE=simple
    MAIL_SUPPRESS_SEND=True
    AWS_ACCESS_KEY_ID=test
    AWS_SECRET_ACCESS_KEY=test
    AWS_REGION=us-east-1
    S3_BUCKET=test-bucket

# Marcadores personalizados
markers =
    unit: Pruebas unitarias
    integration: Pruebas de integración
    e2e: Pruebas end-to-end
    slow: Pruebas que toman más tiempo
    api: Pruebas de API
    telemetry: Pruebas de telemetría
    stability: Pruebas de estabilidad
    alerts: Pruebas de alertas
    statistics: Pruebas de estadísticas

# Configuración de logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Configuración de cache
cache_dir = .pytest_cache

# Configuración de advertencias
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
    ignore::FutureWarning
    ignore::PendingDeprecationWarning 